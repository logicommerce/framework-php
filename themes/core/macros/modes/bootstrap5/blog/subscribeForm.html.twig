{%- macro subscribeForm(args, legalCheck) -%}
    {%- set classWildcard = constant('FWK\\Core\\Form\\FormFactory::CLASS_WILDCARD') -%}
    {%- set attributeWildcard = constant('FWK\\Core\\Form\\FormFactory::ATTRIBUTE_WILDCARD') -%}
    {%- set itemId = 0 -%}                
    {%- set itemType = '' -%}        
    {%- for key, value in args.form.getInputItems()|filter((value, key) => (value.name == constant('FWK\\Enums\\Parameters::TYPE') or value.name == constant('FWK\\Enums\\Parameters::ID')) ) -%}
        {%- if value.name == constant('FWK\\Enums\\Parameters::ID') -%}
            {%- set itemId = value.element.value -%}        
        {%- else -%}
            {%- set itemType = value.element.value -%}    
        {%- endif -%}   
    {%- endfor -%}

    <div id="subscriptionFormContainer">
        <div class="subscriptionForm">
            {%- if args.showLabel -%}
                <div class="subscriptionFormTitle">
                    {%- if itemId == 0 -%}
                        {{- languageSheet[constant('FWK\\Enums\\LanguageLabels::BLOG_SUBSCRIPTION_FORM_TITLE')] -}}
                    {%- else -%}
                        {%- if itemType == 'categorySubscribe' -%}
                            {{- languageSheet[constant('FWK\\Enums\\LanguageLabels::BLOG_CATEGORY_SUBSCRIPTION_FORM_TITLE')] -}}
                        {%- else -%}
                            {{- languageSheet[constant('FWK\\Enums\\LanguageLabels::BLOG_POST_SUBSCRIPTION_FORM_TITLE')] -}}
                        {%- endif -%}
                    {%- endif -%}
                </div>
                <div class="subscriptionFormText">
                    {%- if itemId == 0 -%}
                        {{- languageSheet[constant('FWK\\Enums\\LanguageLabels::BLOG_SUBSCRIPTION_FORM_TEXT')] -}}
                    {%- else -%}
                        {%- if itemType == 'categorySubscribe' -%}
                            {{- languageSheet[constant('FWK\\Enums\\LanguageLabels::BLOG_CATEGORY_SUBSCRIPTION_FORM_TEXT')] -}}
                        {%- else -%}
                            {{- languageSheet[constant('FWK\\Enums\\LanguageLabels::BLOG_POST_SUBSCRIPTION_FORM_TEXT')] -}}
                        {%- endif -%}
                    {%- endif -%}
                </div>
            {%- endif -%}
            {%- for name, element in args.form.getOutputElements([constant('FWK\\Enums\\RichFormItems::LC_DATA_VALIDATION')]) -%}
                {%- if name == constant('FWK\\Core\\Form\\Form::ELEMENT_FORM_START') -%}
                    {{- element|replace({ (attributeWildcard): 'data-lc-form="blogSubscribeForm"' }) -}}
                    <div class="form-message"></div>
                    <div class="subscribe {{ itemType ~ itemId }}Hide">
                {%- elseif name == constant('FWK\\Core\\Form\\Form::SUBMIT') -%}
                        {{- legalCheck -}}
                        <div class="moduleField moduleButton subscribeModuleField subscribeSubmitContainer">
                            {{- element|replace({ (classWildcard): '' }) -}}
                        </div>
                    </div>
                {%- elseif name == constant('FWK\\Enums\\Parameters::EMAIL') -%}
                    <div class="form-group moduleField subscribeModuleField subscribeEmailContainer">
                        {% set fillFnAttr = "" %}
						{% set fillFnClass = "" %}
						{% if name in themeConfiguration.commerce.availableFillDataFields|split(',') %}
							{% set fillFnAttr = 'data-fill-fn="get' ~ ucwords(name) ~ '"' %}   
							{% set fillFnClass = "js-fill-data" %}
						{% endif %}
						{{- element|replace({ 
							(classWildcard): fillFnClass,
							(attributeWildcard): fillFnAttr 
						}) -}}
                    </div>
                {%- else -%}
                    {{- element -}}
                {%- endif -%}
            {%- endfor -%}
        </div>
    </div>

{%- endmacro subscribeForm -%}